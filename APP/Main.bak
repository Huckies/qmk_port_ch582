#include "HuckAL.h"

/*********************************************************************
 * @fn      DebugInit
 *
 * @brief   调试初始化
 *
 * @return  none
 */
void DebugInit(void)
{
    GPIOA_SetBits(GPIO_Pin_9);
    GPIOA_ModeCfg(GPIO_Pin_8, GPIO_ModeIN_PU);
    GPIOA_ModeCfg(GPIO_Pin_9, GPIO_ModeOut_PP_5mA);
    UART1_DefInit();
}

void LedInit(void)
{
    GPIOA_SetBits(GPIO_Pin_12);
    GPIOA_SetBits(GPIO_Pin_13);
    GPIOA_ModeCfg(GPIO_Pin_12, GPIO_ModeOut_PP_5mA);
    GPIOA_ModeCfg(GPIO_Pin_13, GPIO_ModeOut_PP_5mA);
}

/*********************************************************************
 * @fn      main
 *
 * @brief   主函数
 *
 * @return  none
 */
int main()
{
    uint8_t s;
    PWR_DCDCCfg(ENABLE);
    SetSysClock(CLK_SOURCE_PLL_60MHz);

    DebugInit();
    LedInit();
    printf("start\n");
    DelayMs(100);
    extern void hid_custom_keyboard_init(void);
    hid_custom_keyboard_init();
    while (!usb_device_is_configured()) {
    }
    while (1) {
        extern void hid_custom_test();
        hid_custom_test();
        DelayMs(1);
    }
}
